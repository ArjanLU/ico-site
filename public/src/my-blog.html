<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">

<dom-module id="ico-blog">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
      .follow-header{
        background:var(--accent-color);
      }

    ol {
   list-style: none;
 }
  li {
   counter-increment: item;
   margin-bottom: 5px;
 }

li:before {
   margin-right: 10px;
   content: counter(item);
   color: var(--app-secondary-color);
   width: 1.2em;
   font-size:24px;
 }
    </style>



<template is="dom-if" if="[[_hasBlogItem(blogitem)]]">
    <div class="training-page">
        <div id="case-header">
        </div>
      <div class="case-content">
        <div class="case-intro">
          <h1>[[blogitem.title]]</h1>
          <p>[[blogitem.subtitle]]</p>
          <div class="subtitle" style="font-style:italic;font-size:0.8em">Gepubliceerd op [[blogitem.created]] door [[blogitem.author]]</div>
          <div class="link"> 
              <a name="cases" href="[[rootPath]]blog">
                <iron-icon icon="my-icons:arrow-back"></iron-icon>
                Terug 
              </a>
            </div>
        </div>
        </div>
    <div class="follow-content">
        <div class="home-text">
          <div class="text-field">
            <div class="subtitle"></div>
            <div class="title"><h1>Inleiding</h1>
            </div>
            <p>[[blogitem.shortdescription]]</p>
            <div style="display:contents" inner-H-T-M-L="[[_formatContent(blogitem.content)]]"></div>
          </div>
        </div>

        <div class="inverse-link"> 
        <a name="cases" href="[[rootPath]]blog">
          <iron-icon icon="my-icons:arrow-back"></iron-icon>
          Terug 
        </a>
      </div>        
</template>

<template is="dom-if" if="[[!_hasBlogItem(blogitem)]]">
    <div class="follow-header">
        <div class="follow-header-text">
          <div>
            Professionals van Iconica praten over techniek
          </div>
          <!-- <div class="link"> <a name="cases" href="[[rootPath]]cases">Bekijk onze cases</a>
            <iron-icon icon="my-icons:arrow-forward"></iron-icon>
          </div> -->
        </div>
      </div>
  <template is="dom-repeat" items="[[blogarticles]]">
  <div class="follow-content">
    <div class="home-text">
      <div class="text-field">
        <div class="subtitle">[[item.subtitle]]</div>
        <div class="title"><h1>[[item.title]]</h1>
        </div>
        <p>[[item.shortdescription]]</p>
        <div class="subtitle" style="font-style:italic;font-size:0.8em">Gepubliceerd op [[_formatDate(item.created)]] door [[item.author]]</div>
        <div class="inverse-link"> <a name="more" href="[[rootPath]]blog/[[item.title]]">Leer meer...</a>
          <iron-icon icon="my-icons:arrow-forward"></iron-icon>
        </div>
      </div>
    </div>
  </template>
</template>

<div id="page-footer">
  <div class="content-block" style="max-width:none;display:flex;">
      <div class="contact-cards">
          <a name="cases" href="[[rootPath]]cases">
        <div class="card-big">
          <h1>Ons werk</h1>
          <div class="link"> Bekijk cases
            <iron-icon icon="my-icons:arrow-forward"></iron-icon>
          </div>
        </div>
      </a>
      <a name="cases" href="[[rootPath]]over-ons">
        <div class="card-big">
          <h1>Ons team</h1>
          <div class="link"> Bekijk ons team
            <iron-icon icon="my-icons:arrow-forward"></iron-icon>
          </div>   
        </div>
      </a>
      </div>
  </div>
</div>


</template>

<script>
  class MyBlog extends Polymer.Element {
    static get is() { return 'ico-blog'; }
    static get properties () {
      return {
        blogitem:{ type:Object, value:{} }
      }
    }
    _hasBlogItem(blogitem){
      return !(blogitem === undefined || blogitem.title === undefined );
    }

    _formatContent(content){
      var con = content.replace(/\[\*/g, '<').replace(/\*\]/g, '>');
      return con;
    }

    _formatDate(date){
      return new Intl.DateTimeFormat('nl-NL', {}).format(date)
    }
  }


  window.customElements.define(MyBlog.is, MyBlog);
</script>
</dom-module>